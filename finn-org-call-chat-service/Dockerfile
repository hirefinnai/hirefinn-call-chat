FROM python:3.12-slim

ARG CALL_CHAT_SERVICE_SERVER_HOST="0.0.0.0"
ARG CALL_CHAT_SERVICE_SERVER_PORT=7501

ARG WORKERS=1

ENV CALL_CHAT_SERVICE_SERVER_HOST=$CALL_CHAT_SERVICE_SERVER_HOST
ENV CALL_CHAT_SERVICE_SERVER_PORT=$CALL_CHAT_SERVICE_SERVER_PORT

ENV OPENAI_API_KEY="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"
ENV WORKERS=$WORKERS


ENV TWILIO_ACCOUNT_SID="ACa5ffdb07e153c5e7d29b7c3cdd46e0bd"
ENV TWILIO_AUTH_TOKEN="d8690e5922ac72d972dc2479ad18fa71"
ENV NGROK_URL="https://call-chat-api.hirefinn.ai"

ENV SUPABASE_URL="https://ifgbblwhmhldhvghgooi.supabase.co"
ENV SUPABASE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlmZ2JibHdobWhsZGh2Z2hnb29pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY2NTg1OTAsImV4cCI6MjA1MjIzNDU5MH0.yXXq4-iUk4odlD9-5tv6iQsnzPsgKYkTTfaowzf-OPk"


WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip3 install --no-cache-dir -r /code/requirements.txt

COPY ./app /code/app

RUN apt-get update && apt-get install -y curl

EXPOSE $CALL_CHAT_SERVICE_SERVER_PORT

CMD ["python", "app/main.py"]
